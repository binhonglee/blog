<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=0.75">
    
    <title>Cross Language Object Parsing - BinHong Lee&#39;s Blog</title>
    
    <meta name="description" content="I was working on a side project where I had the backend and frontend setup to run on different programming languages. As I was working on it, it started to bug me a little that I have to write the same object / struct and enum for each language in use everytime I introduce a new enum or struct. It can also be confusing / dangerous if I updated one side and forget to update the other.">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Cross Language Object Parsing">
    <meta property="og:description" content="I wrote code that writes code">
    <meta name="twitter:description" content="I wrote code that writes code">
    <meta name="twitter:title" content="Cross Language Object Parsing"><meta property="article:published_time" 2020-08-09T00:00:00-08:00 />
    <meta property="article:modified_time" 2020-08-09T00:00:00-08:00 />
    <meta property="og:image" content="https://binhong.me/blog/preview/cross_language_object_parsing.jpg">
    <meta property="og:image:height" content="600">
    <meta property="og:image:width" content="1200">
    <meta name="twitter:image" content="https://binhong.me/blog/preview/cross_language_object_parsing.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="max-image-preview:large">
    <meta name="image" content="https://binhong.me/blog/preview/cross_language_object_parsing.jpg" />
    <meta name="twitter:site" content="@">
    <meta name="author" content="BinHong Lee">
    <meta property="og:profile:first_name" content="BinHong">
    <meta property="og:profile:last_name" content="Lee">
    <meta property="og:username" content="binhong">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="BinHong Lee&#39;s Blog">
    <meta name="twitter:site" content="@binhonglee">
    <meta name="fediverse:creator" content="@bh@social.lol">
    <link href="https://social.lol/@bh" rel="me">
    
    <link href="https://binhong.me/blog/style.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/blog/darkMode.css?v=1754287594183" rel="stylesheet">
    <link href="https://binhong.me/blog/dark-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/blog/light-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/fonts/fonts.css?v=1747738744" rel="stylesheet">
    <link href="https://binhong.me/threads/threads.css" rel="stylesheet">
    
    
    <link rel="icon" href="https://binhong.me/blog/img/profile.png" />
    
    <meta name="generator" content="Hugo 0.148.2">
    
    </head>
  <body class="single">
    <input class="dark_mode_toggle" type="checkbox" id="darkModeToggle">
    <div class="wrapper">
      <div class="content">
        <div class="dropdown">
          <button class="dropdown_toggle" aria-haspopup="true" aria-controls="dropdown_menu">+</button>
          <div class="header_links" id="dropdown_menu" aria-labelledby="dropdown_toggle" role="menu">
            <a class="link" href="https://binhong.me/" role="menuitem">About</a>
            <p>|</p>
            <a class="link" href="https://binhong.me/blog/" role="menuitem">Blog</a>
            <p>|</p>
            <div class="webring link" role="menuitem">
              <a class="webring_toggle">Webring</a>
              <div class="webring_links">
                <a class="link" href="https://ringdt.rapid.workers.dev/prev?from=https://binhong.me">Prev</a>
                <hr />
                <a class="link" href="https://ringdt.rapid.workers.dev/next?from=https://binhong.me">Next</a>    
              </div>
            </div>
          </div>
        </div>
        <div class="page_of_title">
          <div class="secondary_block">
            <p class="name-title">Blog</p>
          </div>
        </div>
        <div class="dark_mode_toggle_wrapper">
          <div class="toggle-container">
            <label for="darkModeToggle" class="toggle-label">
              <div class="background-layer day-bg"></div>
              <div class="background-layer night-bg"></div>
              
              <div class="toggle-slider">
                <div class="sun-rays"></div>
                <div class="moon-craters">
                  <div class="crater"></div>
                  <div class="crater"></div>
                  <div class="crater"></div>
                </div>
              </div>
              
              <div class="cloud cloud1"></div>
              <div class="cloud cloud2"></div>
              <div class="cloud cloud3"></div>
              <div class="cloud cloud4"></div>
              <div class="cloud cloud5"></div>
              
              <div class="star star1"></div>
              <div class="star star2"></div>
              <div class="star star3"></div>
              <div class="star star4"></div>
              <div class="star star5"></div>
              <div class="star star6"></div>
              <div class="star star7"></div>
              <div class="star star8"></div>
              <div class="star star9"></div>
              <div class="star star10"></div>
              <div class="star star11"></div>
              <div class="star star12"></div>
            </label>
          </div>
        </div>
      </div>


    <article class="content_body primary_block projects">
      <div class="img_class">
        <img class="thumbnail_img" src="https://binhong.me/blog/img/wings.png">
      </div>
      <main class="article_body">
        <div class="active">
          <h1 class="row title">Cross Language Object Parsing</h1>
          <p class="row subtitle">I wrote code that writes code</p>
          <div class="row author">
            <p>BinHong Lee</p>
            <p class="right">August 9, 2020</p>
          </div>
          <div class="post_content"><p>I was working on a side project where I had the backend and frontend setup to run on different programming languages. As I was working on it, it started to bug me a little that I have to write the same object / struct and enum for each language in use everytime I introduce a new enum or struct. It can also be confusing / dangerous if I updated one side and forget to update the other.</p>
<p>At first, I just wrote some shell script to automate this but it quickly become unfeasible. (Clarification: it&rsquo;s still possible to do this, but without any sort of object oriented support, the code gets quite messy quickly and I didn&rsquo;t want to maintain that.) Now, at this point I should let you know that there are actually multiple existing solutions (Apache Thrift or Protobuf) that are way more matured, robust, and designed for use in a much larger scale. If you&rsquo;re working on an enterprise level solution (or looking to learn something that&rsquo;s more transferable into your future work), you might want to take look into them instead. I personally wanted something simpler and more flexible so I began working on <a href="https://wings.sh">wings</a>.</p>
<a class="anchor" href="#installation">
    <h2 id="installation">
        <span class="text">Installation</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>If you have nimble (comes with nim) installed, you can install wings with <code>nimble install wings</code>. As of now, the only alternative to that is to get the binary and place it in a folder included by the path (like <code>/usr/bin/</code>) which unfortunately means that it won&rsquo;t automatically update when a newer version is released. I&rsquo;m still working on (and learning how to) deploy it to more package managers for easier installation process.</p>
<a class="anchor" href="#usage">
    <h2 id="usage">
        <span class="text">Usage</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>You write a wings file like the example below then run <code>wings &lt;FILENAME&gt;.wings</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">go-filepath examples/go/classroom
</span></span><span class="line"><span class="cl">kt-filepath examples/kt
</span></span><span class="line"><span class="cl">nim-filepath examples/nim
</span></span><span class="line"><span class="cl">py-filepath examples/py
</span></span><span class="line"><span class="cl">ts-filepath examples/ts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">py-import examples.output.py.people
</span></span><span class="line"><span class="cl">ts-import { IWingsStruct }:wings-ts-util
</span></span><span class="line"><span class="cl">import examples/input/emotion.wings
</span></span><span class="line"><span class="cl">import examples/input/homework.wings
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">py-implement People
</span></span><span class="line"><span class="cl">ts-implement IWingsStruct
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Any person who is studying in a class
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">struct Student {
</span></span><span class="line"><span class="cl">  id          int       -1
</span></span><span class="line"><span class="cl">  name        str
</span></span><span class="line"><span class="cl">  cur_class   str
</span></span><span class="line"><span class="cl">  feeling     Emotion   Emotion.Meh
</span></span><span class="line"><span class="cl">  is_active   bool
</span></span><span class="line"><span class="cl">  year        date
</span></span><span class="line"><span class="cl">  graduation  date
</span></span><span class="line"><span class="cl">  homeworks   []Homework
</span></span><span class="line"><span class="cl">  something   Map&lt;str,str&gt;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ts-func(
</span></span><span class="line"><span class="cl">  public addHomework(hw: Homework): void {
</span></span><span class="line"><span class="cl">    this.Homeworks.push(hw);
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see, not only does it support generating files based on given specific parameters, it also supports importing other wings files directly which will also be generated by wings (unless specified otherwise in your config file).</p>
<a class="anchor" href="#library">
    <h2 id="library">
        <span class="text">Library</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>Since it&rsquo;s very beginning, wings has been published on nimble as a library for nim. With this, you will be able to make further customizations by importing it as a library especially if you only want to use a specific part of it. From there, you can even use build tools to incorporate it as part of your workflow if supported. (Shameless plug, I wrote the PR for please&rsquo;s basic <a href="https://github.com/thought-machine/pleasings/pull/29">nim</a> and <a href="https://github.com/thought-machine/pleasings/pull/31">nimble</a> support through pleasings. Though admittedly it isn&rsquo;t quite as complete as you can see here I use <a href="https://github.com/binhonglee/wings/blob/devel/build_defs/nim/nim.build_defs">my own version of the config</a> in the repo.)</p>
<p>I&rsquo;ve also created <a href="https://github.com/binhonglee/stones"><code>stones</code></a>, a separate library that contains some generic functions and tools used in wings.</p>
<a class="anchor" href="#generated-files">
    <h2 id="generated-files">
        <span class="text">Generated Files</span>
        <span class="tag">#</span>
    </h2>
</a>
<a class="anchor" href="#struct">
    <h3 id="struct">
        <span class="text"><a href="https://wings.sh/#struct">Struct</a></span>
        <span class="tag">#</span>
    </h3>
</a>
<p>Unlike the afromentioned existing alternatives, it doesn&rsquo;t change the way the data was stored and transferred. You&rsquo;ll still be converting them from and to JSON and communicate through JSON (so they will still be human readable). Therefore, comparatively, it will be &ldquo;slower&rdquo; than the alternatives as it will inherit the same &ldquo;slowness&rdquo; of JSON (depending on how it is serialized and deserialized in each individual languages) and bulkiness (it&rsquo;s a pretty well established fact that JSON string takes more space in memory than something like a serialized thrift object).</p>
<a class="anchor" href="#enum">
    <h3 id="enum">
        <span class="text"><a href="https://wings.sh/#enum">Enum</a></span>
        <span class="tag">#</span>
    </h3>
</a>
<p>Nothing much about them. They&rsquo;re just normal enums that starts from 0 and increment by 1 for each element in it. Custom type and initialization is in the works and might change up the syntax a little when support is added.</p>
<a class="anchor" href="#util-classes">
    <h2 id="util-classes">
        <span class="text">Util Classes</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>While the generated files (generally) work out of the box, they by themselves are still lacking of certain features that can be applied across all Struct or Enum classes. This is where the util classes comes in. They are written in each of their respective targeted languages as a package / library. Currently, there&rsquo;s only a Util class for TypeScript since golang already have all the features in the util class baked in with its JSON support.</p>
<a class="anchor" href="#config">
    <h2 id="config">
        <span class="text"><a href="https://wings.sh/config/">Config</a></span>
        <span class="tag">#</span>
    </h2>
</a>
<p>While the use of a config file is optional, its also where the core value &ldquo;customizable&rdquo; comes from. Config files are accpeted in JSON format and should be added as an argument when calling wings with <code>-c:&lt;CONFIG.json&gt;</code>. Some of the more simple / straightforward configurable value includes things like <a href="https://wings.sh/config/#logging-int"><code>logging</code></a> which controls the verbosity of the output message in the terminal, <a href="https://wings.sh/config/#skipimport-bool"><code>skipImport</code></a> which lets you dictate if you&rsquo;d want to also generate imported files or skip doing so, and <a href="https://wings.sh/config/#header-str"><code>header</code></a> which lets you specify your customized the header comment for all the generated files. On top of that, you can also configure how you want the output files to be formatted by specifying your own templates in <a href="https://wings.sh/config/#langconfigs-str"><code>langConfig</code></a> (more on this below).</p>
<a class="anchor" href="#template">
    <h2 id="template">
        <span class="text"><a href="https://wings.sh/template/">Template</a></span>
        <span class="tag">#</span>
    </h2>
</a>
<p>As mentioned above, you can also write your own or import someone else&rsquo;s templates (with <a href="https://wings.sh/experimental/#remote-template"><code>remoteLangConfigs</code></a>) to configure the output files in your own format or even to output to languages that are not officially supported. This allows wings to be used in a more dynamic way both in terms of range of supported languages and style format instead of being limited by what&rsquo;s officially supported (like in Thrift and protobuf though they do already have a wide range of support).</p>
<a class="anchor" href="#takeaways">
    <h2 id="takeaways">
        <span class="text">Takeaways</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>Overall, I think one of the main takeaway is that if there&rsquo;s already an actively maintained existing solution, it&rsquo;s probably better to use that than to create your own. By now you might have realizes that this project is slowly morphing into something that looks similar to the existing alternatives but in a much simpler form.</p>
<p>Admittedly, I&rsquo;ve only started learning about how a programming language is written only after a few months into the project so the design and structure is not ideal. However, since this is also much simpler compared to a full blown programming language, I can still get away with it on this. That said, I might start to incorporate some of these principles into wings as I continue to work on it (including writing a proper lexer and parser for it).</p>
<p>Of course, this is just a little side project spawn off of another side project. There&rsquo;s also the long time dilemma of &ldquo;should I just write them manually or do I need to write codes (or use an external library) to write them&rdquo; (the NIH syndrome). In this case the later took way more time than the former, but this is a side project so it&rsquo;s more about learning than meeting non-existent delivery dates anyway. I&rsquo;ve also find it fun to have been working on the project so far and I hope you find this helpful. If you&rsquo;d like to learn more about it (or use it yourself), check out the project website at <a href="https://wings.sh">wings.sh</a>. If you like what you&rsquo;ve read, I&rsquo;d appreciate a star on the <a href="https://github.com/binhonglee/wings">wings repository</a>.</p>
</div>
          <div class="tags">
            üîñ
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/automation">Automation</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/object">Object</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/parsing">Parsing</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/cross-language">Cross Language</a>
          </div>
        </div>        <div class="newsletter">
          <h2>Subscribe to the newsletter today!</h2>
          <form action="https://binhong.me/newsletter/subscribe" method="post">
              <input type="email" name="email" placeholder="email@domain.com"/>
              <noscript>
                <br />
                <label>You will need to manually get this secret from <a href="https://binhong.me/newsletter/secret">here</a></label>
                <input name="secret" placeholder="secret"/>
                <br />
              </noscript>
              <input type="hidden" name="secret" id="secret" value="123potato123"/>
              <button type="submit" name="submit" class="subscribe">Subscribe</button>
          </form>
          You can also checkout previous issues <a href="https://binhong.me/newsletter" target="_blank" style="text-decoration: underline;">here</a> before deciding.
        </div>
        <div class="bottom_buttons">
          
          
          
          <a href="/blog/2021-05-22-ava-with-vue-typescript-and-nyc/">
            <div class="bottom_button">
              ‚Üê Next
              <br />
              <br />
              <span class="button_title">Ava with Vue (2.x) &#43; TypeScript (and NYC)</span>
            </div>
          </a>
          
          
          
          <a href="/blog/2019-08-07-multi-language-support-build-tool/">
            <div class="bottom_button previous_post">
              Previous ‚Üí
              <br />
              <br />
              <span class="button_title">Multi-language Support Build Tool</span>
            </div>
          </a>
          
        </div>
      </main>
    </article>
      <footer class="content">
        <div class="footer primary_block">
          <div class="row">
            <p>Fonts:</p>
            <a href="http://vollkorn-typeface.com/" rel="noopener noreferrer nofollow" target="_blank" class="name">Vollkorn</a>,
            <a href="https://rubjo.github.io/victor-mono/" rel="noopener noreferrer nofollow" target="_blank" class="name">Victor Mono</a>
          </div>
          <div class="row">
            <p>
              <a href="https://github.com/binhonglee/blog/blob/main/content/2020-08-09-cross-language-object-parsing.md?plain=1" rel="noopener noreferrer nofollow" target="_blank">Source</a>
              |
              <a rel="alternate" type="application/rss+xml" href="https://binhong.me/blog/index.xml" title="BinHong Lee&#39;s Blog">RSS</a>
            </p>
          </div>
          <div class="row">
            <p>
              &copy; 2025 <a href="https://binhong.me">BinHong Lee</a>
            </p>
          </div>
          <div class="row">
            <p>
              Powered by <a href="https://gohugo.io/" rel="noopener noreferrer nofollow" target="_blank">Hugo</a>
            </p>
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="https://binhong.me/darkMode.js"></script>
    <script type="text/javascript" src="https://binhong.me/viewer.js"></script>
    <script type="text/javascript" src="https://binhong.me/blog/secret.js"></script>
  </body>
</html>

