<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=0.75">
    
    <title>Upgrading Vue TS Project (2.x -&gt; 3.x) - BinHong Lee&#39;s Blog</title>
    
    <meta name="description" content="While Vue 3 has been out of beta for quite a while, (as noted on their website) a migration build is still a work in progress so the current advice is to stay with Vue 2 if it&rsquo;s a non-trivial project. I procrastinated on this article for so long that a migration build has since been released. Feel free to check it out here.
That said, as Parcel v1 is no longer maintained (and with v2 supporting only Vue 3), I figured it&rsquo;s time to upgrade.">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Upgrading Vue TS Project (2.x -&gt; 3.x)">
    <meta property="og:description" content="Migrating from Parcel to vite">
    <meta name="twitter:description" content="Migrating from Parcel to vite">
    <meta name="twitter:title" content="Upgrading Vue TS Project (2.x -&gt; 3.x)"><meta property="article:published_time" 2021-12-12T00:00:00-08:00 />
    <meta property="article:modified_time" 2021-12-12T00:00:00-08:00 />
    <meta property="og:image" content="https://binhong.me/blog/preview/vue3_vite.jpg">
    <meta property="og:image:height" content="600">
    <meta property="og:image:width" content="1200">
    <meta name="twitter:image" content="https://binhong.me/blog/preview/vue3_vite.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="max-image-preview:large">
    <meta name="image" content="https://binhong.me/blog/preview/vue3_vite.jpg" />
    <meta name="twitter:site" content="@">
    <meta name="author" content="BinHong Lee">
    <meta property="og:profile:first_name" content="BinHong">
    <meta property="og:profile:last_name" content="Lee">
    <meta property="og:username" content="binhong">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="BinHong Lee&#39;s Blog">
    <meta name="twitter:site" content="@binhonglee">
    <meta name="fediverse:creator" content="@bh@social.lol">
    <link href="https://social.lol/@bh" rel="me">
    
    <link href="https://binhong.me/blog/style.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/blog/darkMode.css?v=1754287594183" rel="stylesheet">
    <link href="https://binhong.me/blog/dark-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/blog/light-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/fonts/fonts.css?v=1747738744" rel="stylesheet">
    <link href="https://binhong.me/threads/threads.css" rel="stylesheet">
    
    
    <link rel="icon" href="https://binhong.me/blog/img/profile.png" />
    
    <meta name="generator" content="Hugo 0.148.2">
    
    </head>
  <body class="single">
    <input class="dark_mode_toggle" type="checkbox" id="darkModeToggle">
    <div class="wrapper">
      <div class="content">
        <div class="dropdown">
          <button class="dropdown_toggle" aria-haspopup="true" aria-controls="dropdown_menu">+</button>
          <div class="header_links" id="dropdown_menu" aria-labelledby="dropdown_toggle" role="menu">
            <a class="link" href="https://binhong.me/" role="menuitem">About</a>
            <p>|</p>
            <a class="link" href="https://binhong.me/blog/" role="menuitem">Blog</a>
            <p>|</p>
            <div class="webring link" role="menuitem">
              <a class="webring_toggle">Webring</a>
              <div class="webring_links">
                <a class="link" href="https://ringdt.rapid.workers.dev/prev?from=https://binhong.me">Prev</a>
                <hr />
                <a class="link" href="https://ringdt.rapid.workers.dev/next?from=https://binhong.me">Next</a>    
              </div>
            </div>
          </div>
        </div>
        <div class="page_of_title">
          <div class="secondary_block">
            <p class="name-title">Blog</p>
          </div>
        </div>
        <div class="dark_mode_toggle_wrapper">
          <div class="toggle-container">
            <label for="darkModeToggle" class="toggle-label">
              <div class="background-layer day-bg"></div>
              <div class="background-layer night-bg"></div>
              
              <div class="toggle-slider">
                <div class="sun-rays"></div>
                <div class="moon-craters">
                  <div class="crater"></div>
                  <div class="crater"></div>
                  <div class="crater"></div>
                </div>
              </div>
              
              <div class="cloud cloud1"></div>
              <div class="cloud cloud2"></div>
              <div class="cloud cloud3"></div>
              <div class="cloud cloud4"></div>
              <div class="cloud cloud5"></div>
              
              <div class="star star1"></div>
              <div class="star star2"></div>
              <div class="star star3"></div>
              <div class="star star4"></div>
              <div class="star star5"></div>
              <div class="star star6"></div>
              <div class="star star7"></div>
              <div class="star star8"></div>
              <div class="star star9"></div>
              <div class="star star10"></div>
              <div class="star star11"></div>
              <div class="star star12"></div>
            </label>
          </div>
        </div>
      </div>


    <article class="content_body primary_block projects">
      <main class="article_body">
        <div class="active">
          <h1 class="row title">Upgrading Vue TS Project (2.x -&gt; 3.x)</h1>
          <p class="row subtitle">Migrating from Parcel to vite</p>
          <div class="row author">
            <p>BinHong Lee</p>
            <p class="right">December 12, 2021</p>
          </div>
          <div class="post_content"><p><del>While Vue 3 has been out of beta for quite a while, (<a href="https://v3.vuejs.org/guide/migration/introduction.html#breaking-changes">as noted on their website</a>) a migration build is still a work in progress so the current advice is to stay with Vue 2 if it&rsquo;s a non-trivial project.</del> I procrastinated on this article for so long that a migration build has since been released. Feel free to check it out <a href="https://v3.vuejs.org/guide/migration/migration-build.html">here</a>.</p>
<p>That said, as Parcel v1 is <a href="https://www.npmjs.com/package/parcel-bundler/v/1.9.4">no longer maintained</a> (and with v2 supporting only Vue 3), I figured it&rsquo;s time to upgrade.</p>
<a class="anchor" href="#why-not-parcel-v2">
    <h2 id="why-not-parcel-v2">
        <span class="text">Why not Parcel v2?</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>This is actually quite straightforward. I&rsquo;ve been wanting to try out vite for a while since I first saw it mentioned on an esbuild issue (asking for vue SFC support). I did consider snowpack for a while but I still decided to stick with vite seeing how its also created by Evan You and it seems to have mildly better performance.</p>
<p>I did initially try to upgrade the project to Parcel v2 seeing as <a href="https://v2.parceljs.org/getting-started/migration">how simple it was described as</a>. However, <a href="https://github.com/parcel-bundler/parcel/issues/4022">I was wrong</a> and instead of sinking anymore time into it, I decided to move onto something else.</p>
<a class="anchor" href="#moving-onto-vite">
    <h2 id="moving-onto-vite">
        <span class="text">Moving onto vite</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>The one thing that really sealed it for me (with vite) was how simple the move turned out to be. I created an empty project with their template, clone the relatively minimal default config over, and it&rsquo;s &ldquo;mostly&rdquo; working. (Well, &ldquo;mostly&rdquo; because my project was still on Vue 2 instead of Vue 3.) Funnily enough, this was the same reason that led me to opting with Parcel initially since it needed very minimal configuration to get started.</p>
<a class="anchor" href="#vue-router">
    <h2 id="vue-router">
        <span class="text"><code>vue-router</code></span>
        <span class="tag">#</span>
    </h2>
</a>
<p>According to the official Vue 3 guide, the way to call the router is to import and call it the <code>VueRouter</code> you defined. This is slightly different from the previous version where you call <code>this.router</code> to use it. Well technically you can still do exactly that, as long as you define router in your global properties like below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createApp</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="kr">from</span> <span class="s2">&#34;./App.vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">router</span> <span class="kr">from</span> <span class="s2">&#34;./router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">globalProperties</span><span class="p">.</span><span class="nx">$router</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>At this point, router navigation should work just fine but you might see <code>tsc</code> (or <code>vue-tsc</code>) throwing type errors saying that <code>this.router</code> is of type unknown. We&rsquo;ll fix this later when discussing about <code>vue-tsc</code>.</p>
<a class="anchor" href="#vue-tsc">
    <h2 id="vue-tsc">
        <span class="text"><code>vue-tsc</code></span>
        <span class="tag">#</span>
    </h2>
</a>
<p>One of the main upgrades that Vue 3 provides is <code>vue-tsc</code>. On top of the regular type checking already available with <code>tsc</code>, <code>vue-tsc</code> also do type checking for inline TypeScript / Vue code in template (like <code>v-for</code>, <code>v-if</code>, <code>:props</code>&hellip;).</p>
<a class="anchor" href="#volar-vscode">
    <h3 id="volar-vscode">
        <span class="text">Volar (vscode)</span>
        <span class="tag">#</span>
    </h3>
</a>
<p>If you do your Vue project development on vscode, you probably have Vetur installed. While Vetur works with Vue 3 projects, Volar is an upgrade to that comparatively as it uses vue-tsc and displays those new type errors inline. They do not complement / work with each other though so make sure you remove one before you install the other.</p>
<a class="anchor" href="#shims">
    <h2 id="shims">
        <span class="text">Shims</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>So if you&rsquo;re not already familiar with shims, it&rsquo;s essentially a type declaration file to tell your IDE what are the types of the vue file exports (and tsx files). <a href="https://stackoverflow.com/questions/54622621/">Here</a>&rsquo;s a stackoverflow question on why it&rsquo;s needed.</p>
<a class="anchor" href="#shims-vuedts">
    <h3 id="shims-vuedts">
        <span class="text"><code>shims-vue.d.ts</code></span>
        <span class="tag">#</span>
    </h3>
</a>
<p>This is the generic one that&rsquo;d be generated when you create a new Vue project.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">declare</span> <span class="nx">module</span> <span class="s2">&#34;*.vue&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="p">{</span> <span class="nx">DefineComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">component</span>: <span class="kt">DefineComponent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">export</span> <span class="k">default</span> <span class="nx">component</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><a class="anchor" href="#shims-vue-run-timedts">
    <h3 id="shims-vue-run-timedts">
        <span class="text"><code>shims-vue-run-time.d.ts</code></span>
        <span class="tag">#</span>
    </h3>
</a>
<p>If you make router calls in your code with <code>this.$router</code> directly, you might find <code>vue-tsc</code> complaining about missing type declaration for it even if you already declared <code>app.use(router);</code> in your <code>main.ts</code> file. It seems like that doesn&rsquo;t inherit the types imported automatically so you need to declare it separately for <code>vue-tsc</code> to know where to look.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">VueRouter</span> <span class="kr">from</span> <span class="s2">&#34;vue-router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">declare</span> <span class="nx">module</span> <span class="s2">&#34;@vue/runtime-core&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">interface</span> <span class="nx">ComponentCustomProperties</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$router</span>: <span class="kt">VueRouter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Of course, if you also call other stuffs similarly. As an example, let&rsquo;s say you call <code>this.$notify</code> with ElementPlus. You&rsquo;d also include that in this type declaration file like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ElNotification</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;element-plus&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">VueRouter</span> <span class="kr">from</span> <span class="s2">&#34;vue-router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">declare</span> <span class="nx">module</span> <span class="s2">&#34;@vue/runtime-core&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">interface</span> <span class="nx">ComponentCustomProperties</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$notify</span>: <span class="kt">ElNotification</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$router</span>: <span class="kt">VueRouter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>As for why I can&rsquo;t just put these lines of codes in the same type declaration file as above, it threw me some error when I tried that. Separating them somehow solved the issue for me.</p>
<a class="anchor" href="#indexhtml">
    <h2 id="indexhtml">
        <span class="text">index.html</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>Usually this should just be in default state so the only change that needs to be made was to add this additional param of <code>type=&quot;module&quot;</code> to the script tag calling the entrypoint.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;module&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/src/main.ts&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><a class="anchor" href="#pug">
    <h2 id="pug">
        <span class="text">Pug</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>For pug in Vue 2, you can have your whole block indented (kinda like the regular html block). But in Vue 3, it&rsquo;s no longer supported so your outer most <code>div</code> can no longer be indented.</p>
<a class="anchor" href="#wrap-up">
    <h2 id="wrap-up">
        <span class="text">Wrap up</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>Overall, there are some bumps here and there but the process is relatively easy to understand especially with the help of new tools like volar (and faster compilation of vite).</p>
</div>
          <div class="tags">
            🔖
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/vue">Vue</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/typescript">TypeScript</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/vite">vite</a>
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/web">Web</a>
          </div>
        </div>        <div class="newsletter">
          <h2>Subscribe to the newsletter today!</h2>
          <form action="https://binhong.me/newsletter/subscribe" method="post">
              <input type="email" name="email" placeholder="email@domain.com"/>
              <noscript>
                <br />
                <label>You will need to manually get this secret from <a href="https://binhong.me/newsletter/secret">here</a></label>
                <input name="secret" placeholder="secret"/>
                <br />
              </noscript>
              <input type="hidden" name="secret" id="secret" value="123potato123"/>
              <button type="submit" name="submit" class="subscribe">Subscribe</button>
          </form>
          You can also checkout previous issues <a href="https://binhong.me/newsletter" target="_blank" style="text-decoration: underline;">here</a> before deciding.
        </div>
        <div class="bottom_buttons">
          
          
          
          <a href="/blog/2022-01-31-rebuild-personal-site/">
            <div class="bottom_button">
              ← Next
              <br />
              <br />
              <span class="button_title">Rebuilding Personal Site from Scratch</span>
            </div>
          </a>
          
          
          
          <a href="/blog/2021-07-18-postgresql-on-azure/">
            <div class="bottom_button previous_post">
              Previous →
              <br />
              <br />
              <span class="button_title">PostgreSQL on Azure Pipeline with OSX</span>
            </div>
          </a>
          
        </div>
      </main>
    </article>
      <footer class="content">
        <div class="footer primary_block">
          <div class="row">
            <p>Fonts:</p>
            <a href="http://vollkorn-typeface.com/" rel="noopener noreferrer nofollow" target="_blank" class="name">Vollkorn</a>,
            <a href="https://rubjo.github.io/victor-mono/" rel="noopener noreferrer nofollow" target="_blank" class="name">Victor Mono</a>
          </div>
          <div class="row">
            <p>
              <a href="https://github.com/binhonglee/blog/blob/main/content/2021-12-12-vue-3-vite.md?plain=1" rel="noopener noreferrer nofollow" target="_blank">Source</a>
              |
              <a rel="alternate" type="application/rss+xml" href="https://binhong.me/blog/index.xml" title="BinHong Lee&#39;s Blog">RSS</a>
            </p>
          </div>
          <div class="row">
            <p>
              &copy; 2025 <a href="https://binhong.me">BinHong Lee</a>
            </p>
          </div>
          <div class="row">
            <p>
              Powered by <a href="https://gohugo.io/" rel="noopener noreferrer nofollow" target="_blank">Hugo</a>
            </p>
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="https://binhong.me/darkMode.js"></script>
    <script type="text/javascript" src="https://binhong.me/viewer.js"></script>
    <script type="text/javascript" src="https://binhong.me/blog/secret.js"></script>
  </body>
</html>

