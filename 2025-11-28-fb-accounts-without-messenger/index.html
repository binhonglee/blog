<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=0.75">
    
    <title>FB accounts created without Messenger - BinHong Lee&#39;s Blog</title>
    
    <meta name="description" content="This was one of my first experience at causing a SEV. I&rsquo;ve broken production before 🫣 but not bad enough for it to be a SEV. In this situation, millions of new FB accounts were created (over the duration of the outage) without proper messaging inbox thus unable to use Messenger. I&rsquo;ll dive more into how this happens below.
This is part of a series (Project Presentation) where I share stories of my past projects.">
    <meta property="og:type" content="article">
    <meta property="og:title" content="FB accounts created without Messenger">
    <meta property="og:description" content="tfw you accidentally break FB for millions of new users">
    <meta name="twitter:description" content="tfw you accidentally break FB for millions of new users">
    <meta name="twitter:title" content="FB accounts created without Messenger"><meta property="article:published_time" 2025-11-28T00:00:00-08:00 />
    <meta property="article:modified_time" 2025-11-28T00:00:00-08:00 />
    <meta property="og:image" content="https://binhong.me/blog/preview/fb_accounts_without_messenger.jpg">
    <meta property="og:image:height" content="600">
    <meta property="og:image:width" content="1200">
    <meta name="twitter:image" content="https://binhong.me/blog/preview/fb_accounts_without_messenger.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="max-image-preview:large">
    <meta name="image" content="https://binhong.me/blog/preview/fb_accounts_without_messenger.jpg" />
    <meta name="twitter:site" content="@">
    <meta name="author" content="BinHong Lee">
    <meta property="og:profile:first_name" content="BinHong">
    <meta property="og:profile:last_name" content="Lee">
    <meta property="og:username" content="binhong">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="BinHong Lee&#39;s Blog">
    <meta name="twitter:site" content="@binhonglee">
    <meta name="fediverse:creator" content="@bh@social.lol">
    <link href="https://social.lol/@bh" rel="me">
    
    <link href="https://binhong.me/blog/style.css?v=1759946748080" rel="stylesheet">
    <link href="https://binhong.me/blog/darkMode.css?v=1754287594183" rel="stylesheet">
    <link href="https://binhong.me/blog/dark-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/blog/light-syntax.css?v=1754290957202" rel="stylesheet">
    <link href="https://binhong.me/fonts/fonts.css?v=1761449005615" rel="stylesheet">
    <link href="https://binhong.me/threads/threads.css" rel="stylesheet">
    
    
    <link rel="icon" href="https://binhong.me/blog/img/profile.png" />
    
    <meta name="generator" content="Hugo 0.152.2">
    
    </head>
  <body class="single">
    <input class="dark_mode_toggle" type="checkbox" id="darkModeToggle">
    <div class="wrapper">
      <div class="content">
        <div class="dropdown">
          <button class="dropdown_toggle" aria-haspopup="true" aria-controls="dropdown_menu">+</button>
          <div class="header_links" id="dropdown_menu" aria-labelledby="dropdown_toggle" role="menu">
            <a class="link" href="https://binhong.me/" role="menuitem">About</a>
            <p>|</p>
            <a class="link" href="https://binhong.me/blog/" role="menuitem">Blog</a>
            <p>|</p>
            <div class="webring link" role="menuitem">
              <a class="webring_toggle">Webring</a>
              <div class="webring_links">
                <a class="link" href="https://ringdt.rapid.workers.dev/prev?from=https://binhong.me">Prev</a>
                <hr />
                <a class="link" href="https://ringdt.rapid.workers.dev/next?from=https://binhong.me">Next</a>    
              </div>
            </div>
          </div>
        </div>
        <div class="page_of_title">
          <div class="secondary_block">
            <p class="name-title">Blog</p>
          </div>
        </div>
        <div class="dark_mode_toggle_wrapper">
          <div class="toggle-container">
            <label for="darkModeToggle" class="toggle-label">
              <div class="background-layer day-bg"></div>
              <div class="background-layer night-bg"></div>
              
              <div class="toggle-slider">
                <div class="sun-rays"></div>
                <div class="moon-craters">
                  <div class="crater"></div>
                  <div class="crater"></div>
                  <div class="crater"></div>
                </div>
              </div>
              
              <div class="cloud cloud1"></div>
              <div class="cloud cloud2"></div>
              <div class="cloud cloud3"></div>
              <div class="cloud cloud4"></div>
              <div class="cloud cloud5"></div>
              
              <div class="star star1"></div>
              <div class="star star2"></div>
              <div class="star star3"></div>
              <div class="star star4"></div>
              <div class="star star5"></div>
              <div class="star star6"></div>
              <div class="star star7"></div>
              <div class="star star8"></div>
              <div class="star star9"></div>
              <div class="star star10"></div>
              <div class="star star11"></div>
              <div class="star star12"></div>
            </label>
          </div>
        </div>
      </div>


    <article class="content_body primary_block projects">
      <main class="article_body">
        <div class="active">
          <h1 class="row title">FB accounts created without Messenger</h1>
          <p class="row subtitle">tfw you accidentally break FB for millions of new users</p>
          <div class="row author">
            <p>BinHong Lee</p>
            <p class="right">November 28, 2025</p>
          </div>
          <div class="post_content"><p>This was one of my first experience at causing a SEV. I&rsquo;ve broken production before 🫣 but not bad enough for it to be a SEV. In this situation, millions of new FB accounts were created (over the duration of the outage) without proper messaging inbox thus unable to use Messenger. I&rsquo;ll dive more into how this happens below.</p>
<p><em>This is part of a series <a href="/blog/project-presentation/">(Project Presentation)</a> where I share stories of my past projects.</em></p>
<a class="anchor" href="#background">
    <h2 id="background">
        <span class="text">Background</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>When a user tries to create a new account on FB, the system would actually first try to login with the provided credentials to see if it matches any existing account. If it matches, the user would be logged-in to their existing account instead of having a new account created. I added a new feature that make the login / matching system more complex which increases the success rate of it getting matched with an existing account (while maintaining the same low risk profile).</p>
<p><a href="/blog/img/fb_account_without_messenger_1.png" target="_blank">
    
    <figure>
        <img src="/blog/img/fb_account_without_messenger_1.png">
        <figcaption>Simple diagram showing the new change</figcaption>
    </figure>
    
</a>
</p>
<p>The problem however, was that the account creation process by itself was already a complex and lengthy process that takes a long time. So by adding extra processing to it (before account creation is even triggered), the entire process ended up taking so long that the request was timed-out and account creation process was halted halfway. This means accounts were created with bits-and-pieces missing, most notably it&rsquo;s messaging inbox.</p>
<a class="anchor" href="#discovery">
    <h2 id="discovery">
        <span class="text">Discovery</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>This was discovered by an engineer in the Messenger org. They started noticing new accounts without messaging inbox and thought it was weird but they didn&rsquo;t think too much of it. They just manually triggered a job to retroactively create it for those accounts. For the 2 weeks I ran my experiment (a/b test), they just ran the job manually for the subset of new users without a messaging inbox. But when I launch the experience (due to successful a/b test), things got a bit out of hand.</p>
<p>This engineer started seeing significantly (~20x) more new users daily being created without a messaging inbox so they filed a SEV. At some point, someone was able to pinpoint the angle change of their graph with my experiment launch. Seeing as my project directly affects the way account creation process works, it&rsquo;s very likely to be related, thus I got pulled in.</p>
<a class="anchor" href="#verification--resolution">
    <h2 id="verification--resolution">
        <span class="text">Verification + Resolution</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>I was initially skeptical at their reasoning around why these new accounts are missing the messaging inbox and thought there might be something else. But to prove it either way, I decided to pull the plug and unship the project to see if that solves the issue. <strong>It did.</strong> I was wrong but now we need to figure out (ideally) if there&rsquo;s a way to fix this while still shipping the project. We pulled in more help from people who better knows how new account creation works to see if there are other things broken (aside from inbox).</p>
<p><a href="/blog/img/fb_account_without_messenger_2.png" target="_blank">
    
    <figure>
        <img src="/blog/img/fb_account_without_messenger_2.png">
        <figcaption>Simple diagram showing the fix</figcaption>
    </figure>
    
</a>
</p>
<p>As far as we can tell, only inbox was affected by this. So we essentially moved messaging inbox creation to be triggered earlier (as one of the top-tier jobs to be ran in parallel). We re-tested it and see this fixes the issue for all but one or two interfaces (I think it was FBLite and maybe mWeb that still had issues). I actually kept the SEV in <code>Cleanup</code> state for a bit until we dropped it off as the team (technically just half the team which included me) had a prioritization shift moving away from growth to 0 -&gt; 1 so we just left it as is.</p>
<p><em>Eventually, the whole account creation flow was replaced anyway as part of the 0 -&gt; 1 effort to launch <a href="https://about.fb.com/news/2022/09/accounts-center-facebook-and-instagram/">the new unified experience</a>.</em></p>
<a class="anchor" href="#aftermath">
    <h2 id="aftermath">
        <span class="text">Aftermath</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>I was made the SEV owner (being the person who caused it) and filled out the SEV report. I don&rsquo;t remember too clearly how the review went anymore but I did know that I was really nervous throughout. I learnt a lot from the process and as far as I know, I was not penalized for it in my performance review seeing it wasn&rsquo;t exactly <em>my</em> failure that caused this (more on <a href="/blog/2025-05-30-no-blame-sev-culture/">No Blame SEV Culture</a>).</p>
<a class="anchor" href="#takeaway">
    <h2 id="takeaway">
        <span class="text">Takeaway</span>
        <span class="tag">#</span>
    </h2>
</a>
<p>The main takeaway here is that metric monitoring and analysis only goes so far in making sure things work. It generally doesn&rsquo;t cover things that are affected outside of your immediate team&rsquo;s scope. Secondly, even if skeptical, don&rsquo;t assume without proof. I was skeptical that my experiment was the rootcause but I&rsquo;m glad I committed to verifying it anyway (which proved myself wrong). Stressful at the time, but good learning experience overall.</p>
</div>
          <div class="tags">
            🔖
            <a style="border-radius: 5px; border-style: solid; border-width: 1px;" class="tag" href="https://binhong.me/blog/tags/project-presentation">Project Presentation</a>
          </div>
        </div>        <div class="newsletter">
          <h2>Subscribe to the newsletter today!</h2>
          <form action="https://binhong.me/newsletter/subscribe" method="post">
              <input type="email" name="email" placeholder="email@domain.com"/>
              <noscript>
                <br />
                <label>You will need to manually get this secret from <a href="https://binhong.me/newsletter/secret">here</a></label>
                <input name="secret" placeholder="secret"/>
                <br />
              </noscript>
              <input type="hidden" name="secret" id="secret" value="123potato123"/>
              <button type="submit" name="submit" class="subscribe">Subscribe</button>
          </form>
          You can also checkout previous issues <a href="https://binhong.me/newsletter" target="_blank" style="text-decoration: underline;">here</a> before deciding.
        </div>
        <div class="bottom_buttons">
          
          
          
          <a href="/blog">
            <div class="bottom_button">
              ← Back to menu
            </div>
          </a>
          
          
          
        </div>
      </main>
    </article>
      <footer class="content">
        <div class="footer primary_block">
          <div class="row">
            <p>Fonts:</p>
            <a href="http://vollkorn-typeface.com/" rel="noopener noreferrer nofollow" target="_blank" class="name">Vollkorn</a>,
            <a href="https://rubjo.github.io/victor-mono/" rel="noopener noreferrer nofollow" target="_blank" class="name">Victor Mono</a>
          </div>
          <div class="row">
            <p>
              <a href="https://github.com/binhonglee/blog/blob/main/content/2025-11-28-fb-accounts-without-messenger.md?plain=1" rel="noopener noreferrer nofollow" target="_blank">Source</a>
              |
              <a rel="alternate" type="application/rss+xml" href="https://binhong.me/blog/index.xml" title="BinHong Lee&#39;s Blog">RSS</a>
            </p>
          </div>
          <div class="row">
            <p>
              &copy; 2025 <a href="https://binhong.me">BinHong Lee</a>
            </p>
          </div>
          <div class="row">
            <p>
              Powered by <a href="https://gohugo.io/" rel="noopener noreferrer nofollow" target="_blank">Hugo</a>
            </p>
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="https://binhong.me/darkMode.js"></script>
    <script type="text/javascript" src="https://binhong.me/viewer.js"></script>
    <script type="text/javascript" src="https://binhong.me/blog/secret.js"></script>
  </body>
</html>

